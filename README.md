[RouteKit](https://github.com/localvoid/routekit) is a set of tools for generating lightweight and efficient routers.

## Installation

```sh
$ npm install -D routekit
```

## Usage Example

Create a routes file: `routes.build.js`

```js
#!/usr/bin/env node

const routekit = require("routekit");
const JSEmitter = require("routekit-js").JSEmitter;

const routes = new routekit.Builder();

function r(name, path, data) {
  routes.add(name, path, routekit.HttpMethod.GET, JSON.stringify(data));
}

r("userView", "/user/:id", "user/view");
r("userEdit", "/user/:id/edit", "user/edit");
r("home", "/", "home");

const emitter = new JSEmitter(routes);

process.stdout.write(emitter.emitRoutes());
```

Run `routes.build.js` file

```sh
$ node routes.build.js
```

And it will generate `routes.js` file with a compact flattened radix trie.

```js
export const ROUTES = {
  f:[43,50,41,27],
  p:["user/","/edit"],
  d:["home","user/view","user/edit"],
};
```

## Tools

### Builder

Builder provides an easy interface for building routes. It will perform all necessary transformations and generate a
radix tree.

```ts
export class RouteBuilder<T> implements Routes {
  add(name: string, path: string, method: HttpMethod, data?: T): void;
  setData(path: string, method: HttpMethod, data?: T): void;
}
```

It is possible that in the future there will be builders with different interfaces for building routes.

### Routes

Routes object contains details about registered routes as a radix tree and reverse mapping from route names to urls.

```ts
interface Routes {
  root: Node<any>;
  reverse: Map<string, string[]>;
}
```

### Emmiter

Emitter generates programming code from `Routes` object.

#### JSEmitter

`JSEmitter` generates flattened radix tries in "browser" mode and fast radix tries in "server" mode. It also supports
emitting types for TypeScript.

```ts
interface JSEmitterOptions {
  target?: "es2015" | "ts";
  mode?: "browser" | "server";
}

class JSEmitter {
  constructor(routes: Routes, options?: JSEmitterOptions);

  emitDoNotModifyComment(): string;
  emitRoutes(name: string = "ROUTES"): string;
  emitReverseFunctions(): string;
  emitReverseMap(name: string = "REVERSE"): string;
}
```

### Resolver

Resolver is a function that uses generated tree to find a match for an url.

Available resolvers:

- `routekit-resolver` is a basic resolver for browser environments that works with flattened trees generated by
 `JSEmitter`.
