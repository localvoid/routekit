[RouteKit](https://github.com/localvoid/routekit) is a set of tools for generating lightweight and efficient routers.

## Installation

```sh
$ npm install -D routekit
```

## Usage Example

Create a routes file: `routes.build.js`

```js
#!/usr/bin/env node

const routekit = require("routekit");
const jsEmitter = require("routekit-js").jsEmitter;

const routes = new routekit.Builder();

function r(name, path, data) {
  routes.add(name, path, routekit.HttpMethod.GET, JSON.stringify(data));
}

r("userView", "/user/:id", "user/view");
r("userEdit", "/user/:id/edit", "user/edit");
r("home", "/", "home");

process.stdout.write(jsEmitter()(routes));
```

Run `routes.build.js` file

```sh
$ node routes.build.js
```

And it will generate `routes.js` file

```js
/* eslint-disable */
/**
 * DO NOT MODIFY!
 *
 * This file is generated by routekit.
 */

export const ROUTES = {
  f:[43,50,41,27],
  p:["user/","/edit"],
  d:["home","user/view","user/edit"],
};

export function userView(id) {
  return "/user/" + id;
}

export function userEdit(id) {
  return "/user/" + id + "/edit";
}

export function home() {
  return "/";
}

export const REVERSE = {
  "userView": userView,
  "userEdit": userEdit,
  "home": home
};
```

It contains compact flattened radix tree `ROUTES` and a set of functions that can be used to generate urls.

## Tools

### Builder

Builder provides an easy interface for building routes. It will perform all necessary transformations and generate a
radix tree.

```ts
export class RouteBuilder<T> implements Routes {
  add(name: string, path: string, method: HttpMethod, data?: T, meta?: any): void;
  setData(path: string, method: HttpMethod, data?: T, meta?: any): void;
}
```

It is possible that in the future there will be builders with different interfaces for building routes.

### Routes

Routes object contains details about registered routes as a radix tree and reverse mapping from route names to urls.

```ts
interface Routes {
  root: Node<any>;
  reverse: Map<string, string[]>;
}
```

### Emmiter

Emitter generates programming code from `Routes` object.

#### JSEmitter

JSEmitter generates compact trees in "browser" mode and fast trees in "server" mode. It also supports emitting types for
TypeScript.

```ts
interface JSEmitterOptions {
  target?: "es6" | "ts";
  mode?: "browser" | "server";
  header?: string;
  footer?: string;
  routesName?: string;
  reverseFunctions?: boolean;
  reverseMap?: boolean;
  reverseMapName?: string;
  disableLint?: boolean;
}
```

### Resolver

Resolver is a function that uses generated tree to find a match for an url.

Available resolvers:

- `routekit-resolver` is a basic resolver for browser environments that works with flattened trees generated by
 `JSEmitter`.
